"use strict";(self.webpackChunkfeed_specification=self.webpackChunkfeed_specification||[]).push([[5831],{99457:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>o});var t=i(74848),s=i(28453);i(11470),i(19365);const a={sidebar_position:3},l="Real-time HTTP Updates",r={id:"advanced/http-updates",title:"Real-time HTTP Updates",description:"Description",source:"@site/docs/advanced/http-updates.md",sourceDirName:"advanced",slug:"/advanced/http-updates",permalink:"/advanced/http-updates",draft:!1,unlisted:!1,editUrl:"https://github.com/Prisjakt/feed-specification/tree/master/docs/advanced/http-updates.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Url Encoding",permalink:"/advanced/url-encode"},next:{title:"index",permalink:"/advanced/xml/"}},d={},o=[{value:"Description",id:"description",level:2},{value:"API",id:"api",level:2},{value:"Endpoints",id:"endpoints",level:3},{value:"Credentials",id:"credentials",level:3},{value:"Rate Limits",id:"rate-limits",level:3},{value:"Data Model",id:"data-model",level:3},{value:"Example: Offers",id:"example-offers",level:2},{value:"Adding Or Updating",id:"adding-or-updating",level:3},{value:"Removing",id:"removing",level:3},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"real-time-http-updates",children:"Real-time HTTP Updates"})}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsx)(n.p,{children:"If you want to send updates on individual offers as fast as possible you can send us HTTP requests as soon as changes occur. Updates to our system will be near real-time (within seconds) in the normal case. The end user will see changes in about ~15 minutes after our frontend caches expires."}),"\n",(0,t.jsx)(n.admonition,{title:"Create Integrations",type:"info",children:(0,t.jsx)(n.p,{children:"Using this API you can integrate your inventory updates with us in the fastest possible way. E.g. making a plugin or setup a webhook in your e-commerce system to notify us on all changes."})}),"\n",(0,t.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,t.jsx)(n.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"POST https://auth.pj.nu/oauth2/token"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"POST https://api.pj.nu/ingest/v1/shops/:shop_id/offers"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"DELETE https://api.pj.nu/ingest/v1/shops/:shop_id/offers/:offer_id"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"credentials",children:"Credentials"}),"\n",(0,t.jsxs)(n.p,{children:["In order to obtain access to this API please send an email to ",(0,t.jsx)(n.a,{href:"mailto:ingestion@prisjakt.nu",children:"ingestion@prisjakt.nu"})," with the name of your company. We will respond with credentials and your shop identifier."]}),"\n",(0,t.jsx)(n.h3,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"10 requests/s (contact us if more is needed)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"data-model",children:"Data Model"}),"\n",(0,t.jsxs)(n.p,{children:["The fields used are the same as in ",(0,t.jsx)(n.a,{href:"/feeds/offer/fields",children:"our offer feeds"}),". Our API is compatible with the layout of ",(0,t.jsx)(n.a,{href:"https://developers.google.com/merchant/api/reference/rest/products_v1beta/accounts.products",children:"Google Merchant API"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Fields marked ",(0,t.jsx)(n.code,{children:"not-used-by-prisjakt"})," are only included for API compability with the Google Merchant API and are not used by Prisjakt."]}),"\n",(0,t.jsx)(n.admonition,{title:"Send Complete Offers",type:"warning",children:(0,t.jsx)(n.p,{children:"Always send as complete offer information as possible (eg. even if you only update the price, send the full offer information) or else we will consider fields not sent as empty."})}),"\n",(0,t.jsx)(n.h2,{id:"example-offers",children:"Example: Offers"}),"\n",(0,t.jsx)(n.h3,{id:"adding-or-updating",children:"Adding Or Updating"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -X \'POST\' \\\n  \'https://api.prisjakt.nu/ingest/shops/:shop_id/offers\' \\\n  -H \'accept: application/json\' \\\n  -H \'Content-Type: application/json\' \\\n  -H \'client_id: YOUR_ID_HERE\' \\\n  -H \'client_secret: YOUR_SECRET_HERE\' \\\n  -d \'{\n  "name": "Vanish Sole White flytande tv\xe4ttmedel 2,88L",\n  "channel": "not-used-by-prisjakt",\n  "offerId": "12345",\n  "contentLanguage": "en",\n  "feedLabel": "not-used-by-prisjakt",\n  "attributes": {\n    "title": "Vanish Sole White flytande tv\xe4ttmedel 2,88L",\n    "link": "https://yourdomain.se/vitvaror/vanish-sole-white-flytande-tvattmedel-288l",\n    "price": {\n      "amountMicros": 189000000,\n      "currency": "SEK"\n    },\n    "availability": "in_stock",\n    "condition": "new",\n    "conditionGrade": null,\n    "additionalImageLinks": null,\n    "adult": false,\n    "ageGroup": null,\n    "availabilityDate": null,\n    "brand": "Vanish",\n    "color": null,\n    "description": "Sole White 2-in-1 \xe4r speciellt utvecklad f\xf6r vittv\xe4tt",\n    "energyEfficiencyClass": null,\n    "gender": null,\n    "googleProductCategory": "4973",\n    "gtin": [\n      "5714970008281"\n    ],\n    "imageLink": "https://yourdomain.se/vanish_600x600_w_g.jpg",\n    "isBundle": false,\n    "itemGroupId": null,\n    "marketplaceRetailer": "not-used-by-prisjakt",\n    "material": null,\n    "mpn": "3296009",\n    "pattern": null,\n    "productDetail": [\n      {\n        "sectionName": "scent",\n        "attributeName": "scent",\n        "attributeValue": "flower"\n      }\n    ],\n    "productType": [\n      "tvattmedel"\n    ],\n    "promotionId": null,\n    "salePrice": null,\n    "salePriceEffectiveDate": null,\n    "shipping": [\n      {\n        "price": {\n          "amountMicros": 49000000,\n          "currency": "SEK"\n        },\n        "country": "se",\n        "region": null,\n        "service": "Standard frakt",\n        "minHandlingTime": 1,\n        "maxHandlingTime": 1,\n        "minTransitTime": 1,\n        "maxTransitTime": 3\n      }\n    ],\n    "shippingLabel": null,\n    "shippingLength": {\n      "value": 1,\n      "unit": "cm"\n    },\n    "shippingWidth": {\n      "value": 1,\n      "unit": "cm"\n    },\n    "shippingHeight": {\n      "value": 1,\n      "unit": "cm"\n    },\n    "shippingWeight": {\n      "value": 1,\n      "unit": "g"\n    },\n    "size": null,\n    "sizeSystem": null,\n    "pause": null\n  },\n  "customAttributes": null\n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"removing",children:"Removing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"curl -X 'DELETE' \\\n  'https://api.prisjakt.nu/ingest/shops/:shop_id/offers/:offer_id' \\\n  -H 'client_id: YOUR_ID_HERE' \\\n  -H 'client_secret: YOUR_SECRET_HERE'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.google.com/merchant/api",children:"Google Merchant API"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.google.com/merchant/api/reference/rest/products_v1beta/accounts.products",children:"REST Resource: accounts.products"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);